<% if current_user.has_role? :admin or current_user.has_role?('project manager') %>
  <h2><%= t "devise.invitations.new.header" %></h2>

  <% if flash[:alert] %>
    <div class="alert alert-danger">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <%= form_for(@user, as: @resource_name, url: invitation_path(@resource_name), html: { method: :post }) do |f| %>
    <%= render "devise/shared/error_messages", resource: @user %>
    <% @user.class.invite_key_fields.each do |field| -%>
      <div class="flex">
        <div class="field flex gap-2 m-2">
          <%= f.label ('Email*'), class: 'pt-3' %>
          <%= f.email_field field, class: " h-12 border border-[#3F8CFF] hover:border-[#3A81EB] border-2 rounded-lg w-full", placeholder: 'ab@craftsilicon.com', required: true %>
        </div>
        <!-- Firstname field -->
        <div class="field flex gap-2 m-2">
          <%= f.label ('First Name*'), class: 'pt-3' %>
          <%= f.text_field :first_name, class: " h-12 border border-[#3F8CFF] hover:border-[#3A81EB] border-2 rounded-lg w-full", placeholder: 'First Name', required: true  %>
        </div>
        <!-- Lastname field -->
        <div class="field flex gap-2 m-2">
          <%= f.label ('Last Name*'), class: 'pt-3' %>
          <%= f.text_field :last_name, class: " h-12 border border-[#3F8CFF] hover:border-[#3A81EB] border-2 rounded-lg w-full", placeholder: 'Last Name', required: true %>
        </div>
        <div class="field flex gap-2 m-2">
          <%= f.label ('Client Name*'), class: 'pt-3' %>
          <%= f.select :client_id, options_from_collection_for_select(Client.all, :id, :name), { prompt: 'Select Client' }, class: " h-12 border border-[#3F8CFF] hover:border-[#3A81EB] border-2 rounded-lg w-full" %>
        </div>
      </div>
    <% end %>
    <% if current_user.has_role? :admin %>
      <div class="field flex gap-2 m-2">
        <%= f.label ('Role*'), class: 'pt-3 pr-2' %>
        <%= select_tag :role, options_for_select(Role.where.not(name: %w[creator editor]).distinct.pluck(:name, :name)), class: "form-select mt-1 block rounded-md border-gray-300 w-[250px] shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600" %>
      </div>
    <% elsif current_user.has_role?('project manager') %>
      <div class="field flex gap-2 m-2">
        <%= f.label :role, class: 'pt-3 pr-2' %>
        <%= select_tag :role, options_for_select(Role.where.not(name: %w[creator editor admin]).distinct.pluck(:name, :name)), class: "form-select mt-1 block rounded-md border-gray-300 w-[250px] shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600" %>
      </div>
    <% end %>
    <div class="actions">
      <%= f.submit t("devise.invitations.new.submit_button"), class: 'mb-4 h-12 bg-[#3F8CFF] hover:bg-[#3A81EB] p-3 rounded font-bold rounded-lg text-slate-100 w-[250px]' %>
    </div>
  <% end %>
<% end %>
